[app:public_service]
paste.app_factory = fs_gateway.service:public_app_factory

[filter:json_body]
paste.filter_factory = fs_gateway.wsgi:JsonBodyMiddleware.factory

[pipeline:public_api]
pipeline = json_body public_service

[pipeline:proxy]
pipeline = json_body imagefilter flavorfilter tokenfilter projectfilter proxy_app

[filter:projectfilter]
paste.filter_factory = fs_gateway.projectmapping:ProjectMappingMiddleware.factory

[filter:tokenfilter]
paste.filter_factory = fs_gateway.tokenmapping:TokenMappingMiddleware.factory

[filter:imagefilter]
paste.filter_factory = fs_gateway.imagemapping:ImageMappingMiddleware.factory

[filter:flavorfilter]
paste.filter_factory = fs_gateway.flavormapping:FlavorMappingMiddleware.factory

[app:proxy_app]
paste.app_factory = fs_gateway.proxy_app:fs_gateway.factory


[composite:rest]
use = egg:Paste#urlmap
/v1.0 = public_api

[composite:metadata]
use = egg:Paste#urlmap

/ = proxy

